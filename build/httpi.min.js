!function(e){"use strict";var r=e.module("httpi",[]);r.factory("httpi",["$http","$q","HttpiResource",function t(e,r,i){function n(r){r.url=s(r.url,r.params,r.data,1!=r.keepTrailingSlash);var t=a(r),i=e(r);return i.abort=t,i}function a(e){if(e.timeout)return l;var t=function(){t.deferred.resolve()};return t.deferred=r.defer(),e.timeout=t.deferred.promise,t}function s(e,r,t,i){return r=r||{},t=t||{},e=e.replace(/(\(\s*|\s*\)|\s*\|\s*)/g,""),e=e.replace(/:([a-z]\w*)/gi,function(e,i){return h(t,r,i)||""}),e=e.replace(/(^|[^:])[\/]{2,}/g,"$1/"),i&&(e=e.replace(/\/+$/i,"")),e}function l(){console&&console.warn&&console.warn("This request cannot be aborted because the [timeout] property was already being used.")}function h(e,r,t,i){for(var n=Array.prototype.slice.call(arguments),i=n.pop(),a=null;a=n.shift();)if(a.hasOwnProperty(i))return u(a,i)}function u(e,r){var t=e[r];return delete e[r],t}return n.resource=function(e){return new i(n,e)},n}]),r.factory("HttpiResource",function i(){function e(e,r){return this.http=e,this.url=r,this.keepTrailingSlash=!1,this}return e.prototype={constructor:e,"delete":function(e){return e.method="delete",e.url=this.url,e.hasOwnProperty("keepTrailingSlash")||(e.keepTrailingSlash=this.keepTrailingSlash),this.http(e)},get:function(e){return e.method="get",e.url=this.url,e.hasOwnProperty("keepTrailingSlash")||(e.keepTrailingSlash=this.keepTrailingSlash),this.http(e)},head:function(e){return e.method="head",e.url=this.url,e.hasOwnProperty("keepTrailingSlash")||(e.keepTrailingSlash=this.keepTrailingSlash),this.http(e)},jsonp:function(e){return e.method="jsonp",e.url=this.url,e.hasOwnProperty("keepTrailingSlash")||(e.keepTrailingSlash=this.keepTrailingSlash),this.paramJsonpCallback(e),this.http(e)},paramJsonpCallback:function(e){var r="JSON_CALLBACK";if(-1===this.url.indexOf(r)){if(e.params){for(var t in e.params)if(e.params.hasOwnProperty(t)&&e.params[t]===r)return}else e.params={};e.params.callback=r}},post:function(e){return e.method="post",e.url=this.url,e.hasOwnProperty("keepTrailingSlash")||(e.keepTrailingSlash=this.keepTrailingSlash),this.http(e)},put:function(e){return e.method="put",e.url=this.url,e.hasOwnProperty("keepTrailingSlash")||(e.keepTrailingSlash=this.keepTrailingSlash),this.http(e)},setKeepTrailingSlash:function(e){return this.keepTrailingSlash=e,this}},e})}(angular);